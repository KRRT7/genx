<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Data handling &#8212; GenX 2.4.9 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.6/flatly/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.4.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/genx.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Fitting with Differential Evolution" href="diffev.html" />
    <link rel="prev" title="Plugins: an introduction" href="plugin.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          GenX</a>
        <span class="navbar-text navbar-version pull-left"><b>2.4</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Content <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#windows">Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#mac-os-x">Mac OS-X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#from-source">From source</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../tutorials.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#reflectivity">Reflectivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#surface-x-ray-diffraction">Surface x-ray diffraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#other-tutorials">Other tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#general">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#fitting">Fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#reflectivity">Reflectivity</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/data.html">Data classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/write_data_loader.html">How to write a Data Loader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/write_fom.html">Writing a FOM function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/packaging.html">How to package GenX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/mag_refl.html">A model for magnetic reflectivity</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Data handling</a><ul>
<li><a class="reference internal" href="#adding-removing">Adding/Removing</a></li>
<li><a class="reference internal" href="#loading">Loading</a></li>
<li><a class="reference internal" href="#viewing">Viewing</a></li>
<li><a class="reference internal" href="#calculations-transformations">Calculations/Transformations</a></li>
<li><a class="reference internal" href="#exporting">Exporting</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="data-handling">
<span id="tutorial-data-handling"></span><h1>Data handling<a class="headerlink" href="#data-handling" title="Permalink to this headline">¶</a></h1>
<div class="section" id="adding-removing">
<h2>Adding/Removing<a class="headerlink" href="#adding-removing" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../_images/data_tab.png"><img alt="../_images/data_tab.png" src="../_images/data_tab.png" style="width: 25%;" /></a>
<p>A data set can be added by using the green cross above the list of data sets in the data tab (leftmost notebook),
see picture above.
In the same manner one or several data sets can be deleted (no undo) by pressing the red cross next to the green one.
A dialog will appear to make sure that you really want to remove the data set. The data sets can also be moved up and
down in the list by using the two blue arrows.</p>
<p>It is possible to change the name of the current data set in order to make it more human readable. This is done
by double clicking or clicking twice (platform dependent, I believe) on the dataset name.</p>
<p>Lastly, the three different columns after name in the data list shows the status for each data set with regards
to plotting and fitting. The following list will explain them:</p>
<dl class="docutils">
<dt>Show</dt>
<dd>Whether or not to plot the dataset in the plot window. If Yes it will be plotted.</dd>
<dt>Use</dt>
<dd>If the dataset should be used to calculate the Figure of merit FOM. If Yes it is used. This is for fitting.</dd>
<dt>Use Error</dt>
<dd>If the error bars on the data should be used in _both_ plotting and fitting. The fitting part only works
if the FOM function supports it, i.e. Chi2 functions and similar. The error bars will only be displayed when
the data is simulated. During fitting they will not be shown due to performance issues with the plotting.</dd>
</dl>
<p>These states can be toggled (switched between yes and no) by right clicking on the data set and choose the
right menu item in the pop-up menu.</p>
<a class="reference internal image-reference" href="../_images/right_click.png"><img alt="../_images/right_click.png" src="../_images/right_click.png" style="width: 33%;" /></a>
<p>There are also keyboard shortcuts for these if you need to access them
frequently, see the menu <span class="menuselection">Edit‣Data</span>.</p>
<a class="reference internal image-reference" href="../_images/data_menu.png"><img alt="../_images/data_menu.png" src="../_images/data_menu.png" style="width: 33%;" /></a>
</div>
<div class="section" id="loading">
<h2>Loading<a class="headerlink" href="#loading" title="Permalink to this headline">¶</a></h2>
<p>Before loading data you should choose which data set to load the into this is done by simply marking the
data set in the list in the data tab. To load data click on the folder icon in the data tabs upper toolbar.
This will open up a file dialog that allows you to choose which file to load. Note that the behavior could be
customized if you use a different data loader plugin, see <a class="reference internal" href="gui.html#tutorial-gui"><span class="std std-ref">Overview of the  user interface</span></a>.</p>
<p>As a default the data to load is assumed to be two column ASCII format with the columns of x and y data
separated by any whitespace character, i.e., spaces and tabs. A comment should be preceded by a hash(#).
If you would like to change these parameters you can right click on any data set and choose
<span class="menuselection">Import settings</span> from the pop-up menu to change the behavior. It is also possible to choose
<span class="menuselection">Settings‣Data Loader</span> from the pull-down menu. This will make a dialog window to appear where the
data loading process can be customized. Here one should note that all columns and numbered 0, 1, 2 ....</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The numbering starts with 0!.</p>
</div>
</div>
<div class="section" id="viewing">
<h2>Viewing<a class="headerlink" href="#viewing" title="Permalink to this headline">¶</a></h2>
<p>As soon a data set has been loaded this should be displayed in the main plot. If that is not the case something
has gone wrong. In these cases, and other too, the data can viewed from the view tab in the leftmost notebook panel.
There are several columns here and the x_raw, y_raw, ye_raw represents the data as loaded directly from the source
file. The last column represents the displayed value after any Calculations/Transformations has been applied to the
data, see next section.</p>
</div>
<div class="section" id="calculations-transformations">
<h2>Calculations/Transformations<a class="headerlink" href="#calculations-transformations" title="Permalink to this headline">¶</a></h2>
<p>Here some useful expressions for treating the raw data are presented. The treatment is conducting by clicking on the
calculator button on the data toolbar to access the Data Calculations dialog, see below.</p>
<a class="reference internal image-reference" href="../_images/data_calculations_dialog.png"><img alt="../_images/data_calculations_dialog.png" src="../_images/data_calculations_dialog.png" style="width: 50%;" /></a>
<p>Any Python expression will work.
First of all to reset the data to the raw data write, x in the x field and y in the y field. The general
syntax for selecting data from an array is</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">:</span><span class="n">stride</span><span class="p">]</span>
</pre></div>
</div>
<p>If a special interval of the data needs to be fitted:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">[</span><span class="mi">20</span><span class="p">:</span><span class="o">-</span><span class="mi">300</span><span class="p">]</span>
</pre></div>
</div>
<p>where the first value is the starting point (number of elements from the beginning) and the last is the end point.
A negative value means that the end point is calculated from the end of the array. In addition, if the number of
data points has to be decreased the expression above can be extended to include the stride.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">[</span><span class="mi">20</span><span class="p">:</span><span class="o">-</span><span class="mi">300</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>For more information about indexing <a class="reference external" href="http://www.scipy.org/Cookbook/Indexing">see</a>. Consequently with this
expression only every second data point is included. The operations shown here also need to be performed on the
y values. This is done by typing the same expression into the text field for the y values and exchanging x against y.</p>
<p>It is also possible to conduct simple arithmetic operations on the data. For example transforming the
x data from degrees to Qz (scattering vector in reciprocal Angstrom), assuming that a wavelength of 1.54 AA is used:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">4</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">1.54</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">)</span>
</pre></div>
</div>
<p>This would then be typed into the text field for the x data. The examples presented here are rather limited but
hopefully it shows the flexibility of treating the data. For a more detailed list of functions and syntax the
reader is referred to the tutorials and manuals found at <a class="reference external" href="www.scipy.org">scipy</a>.</p>
</div>
<div class="section" id="exporting">
<h2>Exporting<a class="headerlink" href="#exporting" title="Permalink to this headline">¶</a></h2>
<p>Data can be exported to four-column ASCII format (x, y, y_err, simulation) by using the menu
<span class="menuselection">File‣Export‣Data</span> and choosing a data name. Each dataset will be saved to an individual
file with a running number from 000, 001 ... and upwards inserted before the given extension.
For example, if the name <code class="docutils literal"><span class="pre">export.dat</span></code> is given the output files will have the names <code class="docutils literal"><span class="pre">export000.dat</span></code>,
<code class="docutils literal"><span class="pre">export001.dat</span></code> and so on.</p>
<p>Also, if you want to plot the data in another plotting program, such as Excel, <a class="reference external" href="http://www.openoffice.org">OpenOffice</a>
or Origin. The data can be copied in a ASCII spreadsheet format directly to the clipboard.
This is done by using the menu <span class="menuselection">Edit‣Copy Simulation</span>. This will make all data sets in
4-column format after each other, column-wise.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/tutorials/data_handling.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2017, Matts Björck.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>