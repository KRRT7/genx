<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>A model for magnetic reflectivity &#8212; GenX 2.4.9 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.6/flatly/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.4.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/genx.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="How to package GenX" href="packaging.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          GenX</a>
        <span class="navbar-text navbar-version pull-left"><b>2.4</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Content <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#windows">Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#mac-os-x">Mac OS-X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#from-source">From source</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#reflectivity">Reflectivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#surface-x-ray-diffraction">Surface x-ray diffraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#other-tutorials">Other tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#general">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#fitting">Fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#reflectivity">Reflectivity</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../development.html">Development documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="data.html">Data classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_data_loader.html">How to write a Data Loader</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_fom.html">Writing a FOM function</a></li>
<li class="toctree-l2"><a class="reference internal" href="packaging.html">How to package GenX</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">A model for magnetic reflectivity</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">A model for magnetic reflectivity</a><ul>
<li><a class="reference internal" href="#changes-necessary">Changes necessary</a></li>
<li><a class="reference internal" href="#changes-done">Changes done</a></li>
<li><a class="reference internal" href="#layer-parameters">Layer Parameters</a><ul>
<li><a class="reference internal" href="#optical-constants">Optical constants</a></li>
<li><a class="reference internal" href="#densities">Densities</a></li>
<li><a class="reference internal" href="#non-magnetic-layer-parameters">Non-magnetic layer parameters</a></li>
<li><a class="reference internal" href="#magnetic-parameters">Magnetic parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stack-parameters">Stack Parameters</a></li>
<li><a class="reference internal" href="#sample-parameters">Sample Parameters</a><ul>
<li><a class="reference internal" href="#control-flags">Control flags</a></li>
<li><a class="reference internal" href="#slicing-parameters">Slicing Parameters</a></li>
<li><a class="reference internal" href="#compression-parameters">Compression parameters</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="a-model-for-magnetic-reflectivity">
<span id="model-mag-refl"></span><h1>A model for magnetic reflectivity<a class="headerlink" href="#a-model-for-magnetic-reflectivity" title="Permalink to this headline">¶</a></h1>
<p>The model described here is  work in progress and this is only intended as a first draft of the model.
It is not intended for general use.</p>
<div class="section" id="changes-necessary">
<h2>Changes necessary<a class="headerlink" href="#changes-necessary" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Implement faster calculation of multilayers - make use of repetition unit</li>
</ul>
</div>
<div class="section" id="changes-done">
<h2>Changes done<a class="headerlink" href="#changes-done" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Perhaps the angle theta_m should be relative the quantization axis of the probe.
That is as described above for the photon case but an offset of 90 deg for the neutron case.
Then we do not have to &#8220;turn&#8221; the magnetization when refining.</li>
<li>There should probably be two dd_m parameters one dd_ml and one dd_mu so that also depletion in
both the lower and upper layer can be modeled.</li>
<li>Neutron reflectivity calcs should be included.</li>
<li>Remove the slicing parameter from the instrument. - Done</li>
<li>Should perhaps define the magnetic roughness as the convolution between the chemical
roughness and the magnetic roughness. This is to my opinion more physically reasonable.
So sigma_m_real = sqrt(sigma_c2+ sigma_m2) - Done</li>
<li>magdens should be renamed to resdens.</li>
<li>A new parameter called resmag should be included to say how much of the total magnetic
moment comes from the resonant magnetic species. - Done</li>
<li>Make a more ordered way to present the parameters in the reflectivity plugin. - Done</li>
<li>Include a separate slicing criterion for the off-diagonal components - Done.</li>
<li>Implement inline c coding of the reflectivity calculations to improve the speed. - Done it is about 3.5
faster than the previous python implementation.</li>
</ul>
</div>
<div class="section" id="layer-parameters">
<h2>Layer Parameters<a class="headerlink" href="#layer-parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="optical-constants">
<h3>Optical constants<a class="headerlink" href="#optical-constants" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>f</dt>
<dd>The ordinary (tabualted) scattering length. For example <code class="docutils literal"><span class="pre">fp.Fe</span></code> for pure Fe, <code class="docutils literal"><span class="pre">0.5*fp.Fe</span> <span class="pre">+</span> <span class="pre">fp.O*0.5</span></code> for
FeO (this should be in atomic percent).</dd>
<dt>b</dt>
<dd>The neutron scattering length, inserted as for f</dd>
<dt>xs_ai</dt>
<dd>The absorption cross section for neutrons.</dd>
<dt>fr</dt>
<dd>The resonant part of the scattering length (corrections to f close to an absorption edge).
Note that this constant is scaled with magdens before added to f. Note that ftot=f+resdens*fr.
This is the opposite as to the definition by Stephanov and Shina, thus fr = -(F11+F1-1)</dd>
<dt>fm1</dt>
<dd>The XMCD scattering term. Responsible for circular dichroism. fm1=F11-F1-1.</dd>
<dt>fm2</dt>
<dd>The XMLD scattering term. Responsible for linear dichroism. fm2=2F10-(F11+F1-1)</dd>
</dl>
</div>
<div class="section" id="densities">
<h3>Densities<a class="headerlink" href="#densities" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>dens</dt>
<dd>The atomic density of the material in questions in units of atoms/AA3. The density of Fe is calculated as 2/2.8663</dd>
<dt>resmag</dt>
<dd>The density of the magnetic species relative to the resonant species.</dd>
<dt>resdens</dt>
<dd>The relative density of the resonant atomic species. In FeO (and a scattering length as defined above)
it would correspond to 0.5.</dd>
</dl>
</div>
<div class="section" id="non-magnetic-layer-parameters">
<h3>Non-magnetic layer parameters<a class="headerlink" href="#non-magnetic-layer-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>d</dt>
<dd>The thickness of the layer.</dd>
<dt>sigma_c</dt>
<dd>The chemical/structural roughness.</dd>
</dl>
</div>
<div class="section" id="magnetic-parameters">
<h3>Magnetic parameters<a class="headerlink" href="#magnetic-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>sigma_m</dt>
<dd>The magnitude of the magnetic roughness.</dd>
<dt>mag</dt>
<dd>The magnetic moment of the resonant species. This is a scaling factor of the fm1 and fm2 parameters.</dd>
<dt>phi_m</dt>
<dd>The in-plane angle of the magnetization. An angle of zero is along the photon beam directions and 90
perpendicular to it.</dd>
<dt>theta_m</dt>
<dd>Angle of the magnetic moment relative to the surface of the sample. An angel of 0 corresponds to a
in-plane magnetized sample and an angle of 90 deg means an perpendicular magnetized sample.</dd>
<dt>dmag_l</dt>
<dd>The relative change of the magnetization of the lower interface.</dd>
<dt>dmag_u</dt>
<dd>The relative enhancement of the magnetization of the upper interface.</dd>
<dt>dd_l</dt>
<dd>The shift of the magnetic moment profile for the lower interface.</dd>
<dt>dd_u</dt>
<dd>The shift of the magnetic moment profile for the upper interface.</dd>
<dt>sigma_ml</dt>
<dd>The magnetic part of the roughness of the lower interface layer.</dd>
<dt>sigma_mu</dt>
<dd>The magnetic part of the roughness of the upper interface layer.</dd>
</dl>
</div>
</div>
<div class="section" id="stack-parameters">
<h2>Stack Parameters<a class="headerlink" href="#stack-parameters" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="sample-parameters">
<h2>Sample Parameters<a class="headerlink" href="#sample-parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="control-flags">
<h3>Control flags<a class="headerlink" href="#control-flags" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>slicing</dt>
<dd>If yes the model will use roughness values and slice the sld profile up as given by the layer parameters.
Otherwise the layers will only be boxes compress: If yes and slicing also is yes the model will merge layers
with similar optical densities.</dd>
</dl>
</div>
<div class="section" id="slicing-parameters">
<h3>Slicing Parameters<a class="headerlink" href="#slicing-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>slice_depth</dt>
<dd>This is the size of each layer that the model slices up the model into.</dd>
<dt>sld_buffer</dt>
<dd>An extra buffer added below ...</dd>
<dt>sld_delta</dt>
<dd>To come..</dd>
<dt>sld_mult</dt>
<dd>To Come...</dd>
</dl>
</div>
<div class="section" id="compression-parameters">
<h3>Compression parameters<a class="headerlink" href="#compression-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>dsld_max</dt>
<dd>Steps smaller than this parameter will be merged into thicker layers. This applies to the diagonal parts of
the susceptibility matrix. The units are electrons.</dd>
<dt>dsld_offdiag_max</dt>
<dd>Same as dsld_max but this one applies to the off diagonal components.</dd>
<dt>dang_max</dt>
<dd>Not used and should be removed.</dd>
</dl>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/development/mag_refl.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2017, Matts Björck.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>