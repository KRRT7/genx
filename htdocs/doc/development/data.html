<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Data classes &#8212; GenX 2.4.9 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.6/flatly/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.4.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/genx.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to write a Data Loader" href="write_data_loader.html" />
    <link rel="prev" title="Development documentation" href="../development.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          GenX</a>
        <span class="navbar-text navbar-version pull-left"><b>2.4</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Content <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#windows">Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#mac-os-x">Mac OS-X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#from-source">From source</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#reflectivity">Reflectivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#surface-x-ray-diffraction">Surface x-ray diffraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#other-tutorials">Other tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#general">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#fitting">Fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#reflectivity">Reflectivity</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../development.html">Development documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Data classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_data_loader.html">How to write a Data Loader</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_fom.html">Writing a FOM function</a></li>
<li class="toctree-l2"><a class="reference internal" href="packaging.html">How to package GenX</a></li>
<li class="toctree-l2"><a class="reference internal" href="mag_refl.html">A model for magnetic reflectivity</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Data classes</a><ul>
<li><a class="reference internal" href="#datalist">DataList</a></li>
<li><a class="reference internal" href="#dataset">DataSet</a><ul>
<li><a class="reference internal" href="#general-data-handling">General data handling</a></li>
<li><a class="reference internal" href="#important-members">Important members</a></li>
<li><a class="reference internal" href="#extra-data">Extra data</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="data-classes">
<span id="development-data"></span><h1>Data classes<a class="headerlink" href="#data-classes" title="Permalink to this headline">¶</a></h1>
<p>This page will describe how the data is stored in the classes that handles the data. It will not be a complete manual.
It will only deal with basic functionality which expert users might find handy to know.
For more information the reader is refereed to data.py in the source tree.</p>
<p>For storing the data two classes are implemented: The <code class="docutils literal"><span class="pre">DataSet</span></code> class which contains one data
set and the <code class="docutils literal"><span class="pre">DataList</span></code> class which contains several <code class="docutils literal"><span class="pre">DataSet</span></code>s.</p>
<div class="section" id="datalist">
<h2>DataList<a class="headerlink" href="#datalist" title="Permalink to this headline">¶</a></h2>
<p>The major use of the <code class="docutils literal"><span class="pre">DataList</span></code> is to make ordinary list methods available and at the same time making it possible
to apply commands to entire data set or subset when working with the data from the GUI. Some of the list
functionality include:</p>
<ul>
<li><p class="first">Extracting one element by list-like access</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">datalist</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">Using slicing to extract a subset of the <code class="docutils literal"><span class="pre">datalist</span></code> such as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">subdatalist</span> <span class="o">=</span> <span class="n">datalist</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">Iterations over the <cite>DataSet`s in the `DataList</cite> such as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">dataset</span> <span class="ow">in</span> <span class="n">datalist</span><span class="p">:</span>
    <span class="o">....</span>
</pre></div>
</div>
<ul class="simple">
<li>Using the <cite>len</cite> function such as <cite>len(datalist)</cite></li>
</ul>
</li>
</ul>
<p>The rest of the functions for the <cite>DataList</cite> is mainly of interest for GUI programmers and should not
be necessary to dwell upon here, if you need to know use the source.</p>
</div>
<div class="section" id="dataset">
<h2>DataSet<a class="headerlink" href="#dataset" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">DataSet</span></code> class contains all the information about a certain data set.</p>
<div class="section" id="general-data-handling">
<h3>General data handling<a class="headerlink" href="#general-data-handling" title="Permalink to this headline">¶</a></h3>
<p>When data has been loaded into the data class it is loaded into the member variables
<code class="docutils literal"><span class="pre">x_raw</span></code>, <code class="docutils literal"><span class="pre">y_raw</span></code>, <code class="docutils literal"><span class="pre">error_raw</span></code>, <code class="docutils literal"><span class="pre">extra_data_raw</span></code> then the commands as defined
in <code class="docutils literal"><span class="pre">x_command</span></code>, <code class="docutils literal"><span class="pre">y_command</span></code>, <code class="docutils literal"><span class="pre">error_command</span></code>, <code class="docutils literal"><span class="pre">extra_data_command</span></code> is evaluated and stored in
the variable names <code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code>, <code class="docutils literal"><span class="pre">e</span></code> and the keys in the <code class="docutils literal"><span class="pre">extra_data</span></code> identical to the raw data
variables. This makes the evaluations of the data calculations/transformations <em>independent</em> of previous
evaluations. The commands are always on the raw data. The result of these evaluations is then set to the
member variables <code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code>, <code class="docutils literal"><span class="pre">error</span></code>, <code class="docutils literal"><span class="pre">extra_data</span></code>.</p>
</div>
<div class="section" id="important-members">
<h3>Important members<a class="headerlink" href="#important-members" title="Permalink to this headline">¶</a></h3>
<p>The members of the class that could be of interest are:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">x</span></code></dt>
<dd>The x-values after the commands has been executed on the raw data.</dd>
<dt><code class="docutils literal"><span class="pre">y</span></code></dt>
<dd>The y-values after the commands has been executed on the raw data.</dd>
<dt><code class="docutils literal"><span class="pre">error</span></code></dt>
<dd>The error on the y-values after the commands has been executed on the raw data.</dd>
<dt><code class="docutils literal"><span class="pre">sim</span></code></dt>
<dd>The simulation of the data as calculated from the <cite>Sim</cite> function in the model.</dd>
<dt><code class="docutils literal"><span class="pre">extra_data</span></code></dt>
<dd>A <a class="reference external" href="http://docs.python.org/tutorial/datastructures.html#dictionaries">dictionary</a> of the extra data as defined b
y the data loader plugin. This is also after the commands has been executed on the extra data if it is defined
to be accessible from the data loader plugin.</dd>
<dt><code class="docutils literal"><span class="pre">show</span></code></dt>
<dd>A flag, boolean, that defines if the <code class="docutils literal"><span class="pre">DataSet</span></code> should be visible.</dd>
<dt><code class="docutils literal"><span class="pre">use</span></code></dt>
<dd>A flag, boolean, that defines if the <code class="docutils literal"><span class="pre">DataSet</span></code> should be used the FOM calculation.</dd>
<dt><code class="docutils literal"><span class="pre">use_error</span></code></dt>
<dd>A flag, boolean, that defines if the <code class="docutils literal"><span class="pre">DataSet</span></code> has errorbars that should be used.</dd>
<dt><code class="docutils literal"><span class="pre">name</span></code></dt>
<dd>The name of the <code class="docutils literal"><span class="pre">DataSet</span></code>. This is a string which can be non-unique.</dd>
</dl>
<p>There are also a number of member variables that defines plotting:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">data_color</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">sim_color</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="n">data_symbol</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span>
<span class="n">data_symbolsize</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">data_linetype</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
<span class="n">data_linethickness</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">sim_symbol</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">sim_symbolsize</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">sim_linetype</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
<span class="n">sim_linethickness</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
<p>And also the member variables that contains the raw data values as loaded from file and the commands applied to them.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">x_raw</span> <span class="o">=</span> <span class="n">array</span><span class="p">([])</span>
<span class="n">y_raw</span> <span class="o">=</span> <span class="n">array</span><span class="p">([])</span>
<span class="n">error_raw</span> <span class="o">=</span> <span class="n">array</span><span class="p">([])</span>
<span class="n">extra_data_raw</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">extra_commands</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">x_command</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span>
<span class="n">y_command</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>
<span class="n">error_command</span> <span class="o">=</span> <span class="s1">&#39;e&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-data">
<h3>Extra data<a class="headerlink" href="#extra-data" title="Permalink to this headline">¶</a></h3>
<p>In order to operate on loaded extra_data as ordinary data it has to be added as an item to the
dictionary extra_command. In doing so it will also be subjected to the same rigorous constraint as the
<code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code> and <code class="docutils literal"><span class="pre">error</span></code> values. It has to an array of the same length as all the other and it has
to possible to use it the commands for the data. Otherwise the data will just be present in
the extra_data array to use. This can be handy for external conditions that is stored in the data file,
for example magnetic field, temperature or pressure.</p>
<p>To create a new <code class="docutils literal"><span class="pre">extra_data</span></code> instance use the method <code class="docutils literal"><span class="pre">set_extra_data(self,</span> <span class="pre">name,</span> <span class="pre">value,</span> <span class="pre">command</span> <span class="pre">=</span> <span class="pre">None)</span></code> for
example to add a temperature variable <code class="docutils literal"><span class="pre">T</span></code> to the <code class="docutils literal"><span class="pre">DataSet</span></code> <code class="docutils literal"><span class="pre">dataset</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">set_extra_data</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>If you on the other hand want to make it as an additional independent variable</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">set_extra_data</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;T&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To get extra data you can use the method <code class="docutils literal"><span class="pre">get_extra_data(self,</span> <span class="pre">name)</span></code>, for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">get_extra_data</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In the future there might be an implementation so that the extra dat can be directly accessed as <cite>dataset.T</cite> but that
will not be implemented right now.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/development/data.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2017, Matts Björck.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>